package floods;

import cartago.*;

public class VehicleUgv extends Artifact {
	
	void init(String area, String store) {
		defineObsProperty("at",area);
		defineObsProperty("storage",store);
	}
	
	@OPERATION void navigate(String area) throws InterruptedException {
		Thread.sleep(10);
		getObsProperty("at").updateValue(area);
	}
	
	@OPERATION void take_picture(String flood, String visible_from) throws InterruptedException {
		ObsProperty cond1 = getObsProperty("at");
		if ( visible_from.contains(cond1.toString()) )
		{
			Thread.sleep(10);
			defineObsProperty("have_picture", flood);
		} else {
			failed("Action take_picture has failed.");
	    }
	}
	
	@OPERATION void get_kit(ArtifactId box) throws InterruptedException, OperationException {
		ObsProperty cond1 = getObsProperty("storage");
		if (cond1.stringValue().equals("empty") )
		{
			Thread.sleep(10);
			getObsProperty("storage").updateValue("full");
			//System.out.println(box);
			execLinkedOp(box, "updateLoc", getCurrentOpAgentId().getAgentName());
			
		} else {
			failed("Action get_kit has failed.");
	    }
	}
	
	@OPERATION void drop_kit(String area) throws InterruptedException {
		ObsProperty cond1 = getObsProperty("storage");
		if (cond1.stringValue().equals("full") )
		{
			Thread.sleep(10);
			getObsProperty("storage").updateValue("empty");
			getObsProperty("at").updateValue(area);
		} else {
			failed("Action drop_kit has failed.");
	    }
	}	
	
}

